# 📝 Diary - 감정을 기록하고 공유하는 일기장

> 감정 기반 일기 작성 및 선택적 공유 기능을 제공하는 감성 일기장 웹 애플리케이션  
> Spring Boot + JdbcTemplate + Session 기반 로그인으로 구현

## ✨ 주요 기능 (ver 1.1.0)

### 일기 기능
  - 일기 작성
    - 날짜, 기분, 제목, 내용 입력
    - 기분 선택 : 기쁨, 슬픔, 분노, 두려움, 불쾌
  - 일기 조회
    - 내가 작성한 일기 목록 및 상세 조회
    - 내가 공유 받은 사용자의 일기 목록 조회 가능
  - 일기 수정
    - 나의 일기만 수정 가능
  - 일기 삭제
    - 나의 일기만 삭제 가능
---
### 일기 공유 기능
- 일기 공유 요청 보내기
  - 다른 사용자 ID 입력 → 공유 요청 전송
  - 내가 보낸 공유 요청 목록 확인 가능
- 공유 요청 수락/거절
  - 나에게 온 공유 요청 목록 확인 가능
  - 수락 시 → 상대방의 일기 열람 가능
  - 거절 시 → 상대방의 일기 열람 불가
  - 거절 후에도 재요청 가능
- 공유 해제
  - 더 이상 상대방에게 일기를 공유하고 싶지 않을 경우 공유 관계 해제 가능
---
### 공유 요청 관리 조건
- 공유 요청이 불가능한 경우
  - 존재하지 않는 ID인 경우
  - 본인의 ID를 입력한 경우
  - 이미 공유 중인 사용자에게 요청한 경우
  - 이미 요청을 보낸 사용자에게 중복 요청한 경우
---
### 공유 관계의 특징
- 공유 요청은 일방향 관계
  - A → B에게 공유 요청 → B가 수락 → B는 A의 일기 열람 가능
- 서로 요청을 수락한 경우만 쌍방 열람 가능
- 일기 수정/삭제 권한은 항상 작성자 본인만 가능
---
### 공유 일기 좋아요 기능
- 공유 받은 일기에 좋아요를 누를 수 있는 기능
- 좋아요 수 표시 및 실시간 UI 반영(❤️ / 🤍 토글)
- 동일 사용자가 같은 일기에 여러 번 좋아요 누를 수 없음
- 작성자는 자신의 일기에 좋아요를 누를 수 없음 (단, 좋아요 수는 확인 가능)

## ERD 요약 (간단 소개)

| 테이블명 | 설명                                                             |
|----------|----------------------------------------------------------------|
| `user` | 사용자 정보                                                         |
| `diary` | 일기 데이터 (제목, 날짜, 기분, 내용 등)                                      |
| `diary_share_request` | 공유 요청 테이블 (요청자 ID, 수신자 ID, 상태값: PENDING / ACCEPTED / REJECTED) |

## 💡 개선 과정 및 고민

| 버전 | 개선 내용 |
|------|-----------|
| v1.0.0 | 초기 버전, CRUD 중심 개발 및 기본 공유 기능 구현 |

## ✏️ 개발 기능별 작업 내역

| 기능 번호 | 기능 내용 | 예상 작업일수 | 예상 일정              | 실제 완료일 | 상세 내용 |
|-----------|-----------|---------|--------------------|--------|-------------|
| 1 | JDBC → MyBatis 전환 | 5일      | 2025.04.10 ~ 04.16 | 04.15  | 기존 DAO 로직을 MyBatis로 전환. Mapper XML/Interface 작성 및 테스트 완료. |
| 2 | 공유 일기 좋아요 기능 | 1.5일    | 2025.04.17 ~ 04.18 | 04.19  | 로그인 사용자가 공유 받은 일기에 좋아요/취소 토글 가능. 프론트엔드 Ajax 처리 및 좋아요 수 동기화 구현. 작성자 본인은 좋아요 버튼 비노출 처리. |
| 3 | 공유 일기 댓글/답글 기능 | 3일      | 2025.04.21 ~ 04.23 | -      | 댓글 및 답글 등록/조회/삭제 API 구현. 계층 구조 반영. |
| 4 | 일기 예약 작성 기능 | 2일      | 2025.04.24 ~ 04.25 | -      | 예약 시간 기반 자동 공개 처리 스케줄러 구현. 예외 처리 포함. |
